<!DOCTYPE html>
<html lang="en">
<html>

	<head>
		
		<title>SONY LIV</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
		<link href="https://fonts.googleapis.com/css2?family=Gloock&amp;display=swap" rel="stylesheet">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
		<link href="https://fonts.googleapis.com/css2?family=Fjalla+One&amp;display=swap" rel="stylesheet">
		<link rel="shortcut icon" href="https://images.slivcdn.com/UI_icons/sonyliv_new_revised_header_logo.png?w=40&q=high">
		<link rel="stylesheet" href="style.css">
		<!-- ===== Boxicons CSS ===== -->
		<link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

		<style>
			body {
			      /* display: flex; */
			      align-items: center;
			      justify-content: center;
			      margin: 0 12px;
			      height: 100%;
			      background-color: #1F0C50;
			
			    }
			
			    .box-shadow {
			      font-family: sans-serif;
			      font-weight: 600;
			      background-color: #2ecc71;
			      color: white;
			      padding: 10px;
			      border-radius: 4px;
			      box-shadow: 2px 2px 20px 23px #7fecad;
			      background-color: #f8f8f8;
			      padding: 20px;
			      border-radius: 10px;
			      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
			      text-align: center;
			      font-family: 'Arial', sans-serif;
			      font-size: 15px;
			      color: #333;
			    }
			
			    #title {
			      font-family: 'Gloock', serif;
			      font-weight: bold;
			      font-size: 28px;
			      color: #e61271;
			      text-align: center;
			      text-transform: uppercase;
			      letter-spacing: 4px;
			      margin: 20px 0;
			      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
			      background-color: #f1f1f1;
			      padding: 10px 20px;
			      border-radius: 10px;
			      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
			    }
			
			    a. {
			      text-decoration: none !important;
			    }


header {
  background-color: #0D012F;
  color: #fff;
  padding: 20px 20px;
  display: flex;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
}

.logo-img {
  width: 65px; /* Adjust the width of the logo */
  height: auto;
  margin-right: 0px;
}

.site-title {
font-weight: bold;
font-size: 18px;
  margin: 0;
}

#kaya_head {
font-weight: bold;
  color: #FFFFFF;
  font-size: 25px;
  text-transform: uppercase;
  font-family: 'Tilt Warp', sans-serif;
}

		</style>
		<link rel="stylesheet" href="https://ipl-2023-schedule.pages.dev/jtv.css">
		<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script>
		
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css" rel="stylesheet">
		<link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="https://play-lh.googleusercontent.com/4VsxQM_JpvxB-qlQaVmYiZMZd9YCUs6AIxUfKADL9iZF-sl2Cmz3vjBebtlV0KI2DNs=w600-h300-pc0xffffff-pd" alt="Logo" class="logo-img">
            <h1 class="site-title">SONY LIV</h1>
        </div>
    </header>

    <main>
        <div style="margin: 25px;">
            <input type="search" id="searchInput" placeholder="Search" class="w-full rounded-l border border-solid border-neutral-300 bg-black px-3 py-1.5 text-base text-neutral-700" />
        </div>
        <div id="kaya_head">
            <span class="kayaheadicon" onclick="window.history.back()">
                <i class="fa-solid fa-arrow-left-long"></i>
            </span>
            &nbsp;&nbsp;Trending
        </div>
        <div id="listContainer" class="container grid place-items-center grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 mx-auto">
            <!-- Cards will be inserted here -->
        </div>
    </main>

    <script>
        async function generateHtmlFromJson(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    console.error('HTTP error:', response.status, response.statusText);
                    return;
                }
                const jsonData = await response.json();
                console.log('JSON data:', jsonData); // Log the data

                // Access the matches array
                const matches = jsonData.matches;
                if (!Array.isArray(matches)) {
                    console.error('Expected an array but got:', matches);
                    return;
                }

                const listContainer = document.getElementById('listContainer');
                listContainer.innerHTML = ''; // Clear any existing content

                matches.forEach(function(item) {
                    const anchor = document.createElement('a');
                    anchor.href = `play.html?id=${item.match_id}`;

                    const cardDiv = document.createElement('div');
                    cardDiv.classList.add('box1');

                    const card = document.createElement('div');
                    card.classList.add('card', 'w-40', 'bg-gray-100', 'rounded-xl', 'shadow-lg', 'h-48', 'mb-4', 'flex', 'flex-col');

                    const image = document.createElement('img');
                    image.src = item.banner;
                    image.classList.add('h-28', 'mt-5', 'm-auto', 'opacity-100');
                    image.alt = item.match_name; // Add alt attribute for accessibility

                    const title = document.createElement('h2');
                    title.classList.add('text-center', 'text-sm', 'font-bold');
                    title.textContent = item.match_name;

                    const description = document.createElement('div');
                    description.classList.add('mb-5', 'opacity-100');
                    const descriptionText = document.createElement('p');
                    descriptionText.classList.add('text-xs', 'text-center');
                    descriptionText.textContent = item.event_catagory || 'No category available'; // Handle missing category

                    description.appendChild(title);
                    description.appendChild(descriptionText);
                    card.appendChild(image);
                    card.appendChild(description);
                    anchor.appendChild(card);
                    cardDiv.appendChild(anchor);
                    listContainer.appendChild(cardDiv);
                });
            } catch (error) {
                console.error('Error fetching or parsing JSON:', error);
            }
        }

        // Call the function with the URL of your JSON data once the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            generateHtmlFromJson('https://raw.githubusercontent.com/byte-capsule/FanCode-Hls-Fetcher/main/Fancode_hls_m3u8.Json');
        });

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', filterData);

        function filterData() {
            const updatedSearchValue = searchInput.value.toLowerCase();
            const boxes = document.querySelectorAll('.box1');

            boxes.forEach((box) => {
                const h2Text = box.querySelector('h2') ? box.querySelector('h2').textContent.toLowerCase() : '';
                const pText = box.querySelector('p') ? box.querySelector('p').textContent.toLowerCase() : '';

                if (h2Text.includes(updatedSearchValue) || pText.includes(updatedSearchValue)) {
                    box.style.display = 'block'; // Show matching box
                } else {
                    box.style.display = 'none'; // Hide non-matching box
                }
            });
        }
    </script>
</body>
</html>
