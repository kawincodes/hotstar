<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Stream</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://content.jwplatform.com/libraries/Z79JsmAO.js"></script>

    <style>
        body {
                        height: 100%;
          
        }

        #jwplayerDiv {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<div id="jwplayerDiv"></div>

<script>
  // Get all 'id' parameters from the URL
  const urlParams = new URLSearchParams(window.location.search);
  const selectedStreamIds = urlParams.getAll('id'); // Returns an array of selected IDs

  if (selectedStreamIds.length === 0) {
    console.error("No stream IDs provided in the URL.");
    return;
  }

  // Fetch the sports.json file
  fetch('sports.json')
    .then(response => response.json())
    .then(data => {
      // Loop through all the provided IDs
      selectedStreamIds.forEach(streamId => {
        const stream = data.find(item => item.id == streamId);

        if (stream) {
          // Setup JW Player with dynamic data for the selected stream
          jwplayer("jwplayerDiv").setup({
            file: stream.link, // Video file URL from the JSON
            skin: { name: "netflix" },
            title: stream.title, // Title from JSON
            description: stream.description, // Description from JSON
            logo: {
              file: "https://i.postimg.cc/2yNvT7Qk/slazzer-edit-image-1.png",
              link: "https://telegram.me/vaathala1"
            },
            image: stream.logo, // Logo image (thumbnail) from JSON
            drm: {
              clearkey: {
                key: stream.k,
                keyId: stream.kid
              }
            }
          });
        } else {
          console.error("Stream not found for the given ID:", streamId);
        }
      });
    })
    .catch(error => {
      console.error("Error fetching or parsing the sports.json file:", error);
    });
</script>

</body>
</html>
