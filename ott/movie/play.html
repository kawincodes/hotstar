document.addEventListener("DOMContentLoaded", function () {
    // Load JSON data
    fetch('movies.json')
        .then(response => response.json())
        .then(data => {
            // Find the movie object with id 1 (assuming your JSON may have multiple movies)
            const movie = data.find(movie => movie.id === 1);

            if (movie) {
                // Initialize Plyr player
                const player = new Plyr('#player', {
                    controls: ['play', 'progress', 'mute', 'volume', 'fullscreen'],
                });

                // Source for the video
                const source = {
                    type: 'video',
                    sources: [{
                        src: movie.video,
                        type: 'video/mp4',
                    }],
                };

                player.source = source;

                // Update download button href
                const downloadBtn = document.getElementById('downloadBtn');
                downloadBtn.href = movie.download;

                console.log('Video source:', movie.video); // Log video source for debugging
                console.log('Download link:', movie.download); // Log download link for debugging

            } else {
                console.error('Movie with id 1 not found in JSON data.');
            }
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });
});
