<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Movies Website</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.2/plyr.css" />
    <style>
        /* Add your custom styles here */
        .movie-card {
            border: 1px solid #ccc;
            border-radius: 8px;
            margin: 10px;
            padding: 15px;
            width: 300px;
            display: inline-block;
            vertical-align: top;
            background-color: #f9f9f9;
        }

        .movie-card img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .movie-card .title {
            font-size: 18px;
            font-weight: bold;
            margin-top: 10px;
        }

        .movie-card .description {
            margin-top: 5px;
            color: #666;
        }

        .movie-card .player-container {
            margin-top: 10px;
        }

        .movie-card .download-btn {
            display: block;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <div id="movieList"></div>

    <script src="https://cdn.plyr.io/3.6.3/plyr.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Load JSON data
            fetch('movies.json') // Replace with your JSON file path
                .then(response => response.json())
                .then(data => {
                    // Generate movie cards
                    const movieListElement = document.getElementById('movieList');
                    data.forEach(movie => {
                        const movieCard = createMovieCard(movie);
                        movieListElement.appendChild(movieCard);
                    });
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });

            // Function to create movie card HTML
            function createMovieCard(movie) {
                const card = document.createElement('div');
                card.classList.add('movie-card');

                // Image
                const img = document.createElement('img');
                img.src = movie.image;
                card.appendChild(img);

                // Title
                const title = document.createElement('div');
                title.classList.add('title');
                title.textContent = movie.title;
                card.appendChild(title);

                // Description
                const description = document.createElement('div');
                description.classList.add('description');
                description.textContent = movie.description;
                card.appendChild(description);

                // Video Player
                const playerContainer = document.createElement('div');
                playerContainer.classList.add('player-container');
                const videoElement = document.createElement('video');
                videoElement.id = `player_${movie.id}`; // Ensure each player has a unique ID
                playerContainer.appendChild(videoElement);
                card.appendChild(playerContainer);

                // Setup Plyr player
                const player = new Plyr(`#player_${movie.id}`, {
                    controls: ['play', 'progress', 'mute', 'volume', 'fullscreen'],
                });

                // Source for the video
                const source = {
                    type: 'video',
                    sources: [{
                        src: movie.video,
                        type: 'video/mp4',
                    }],
                };

                player.source = source;

                // Download Button
                const downloadBtn = document.createElement('a');
                downloadBtn.classList.add('download-btn');
                downloadBtn.href = movie.download;
                downloadBtn.textContent = 'Download';
                card.appendChild(downloadBtn);

                return card;
            }
        });
    </script>
</body>

</html>
